| 0 | file... | 0 | 0 | exit | 0 | case        | command^ | space | command... |  0 |
| 0 | file... | 0 | 0 |    0 | 0 | 0           |        0 |    0^ | command... |  0 |
| 0 | file... | 0 | 0 |    0 | 0 | command...  |        0 |     0 |          0 | 0^ |
| 0 | file... | 0 | 0 |    0 | 0 | command...^ |        0 |     0 |          0 |  0 |
| 0 | file... | 0 | 0 |    0 | 0 | command...  |        0 |     0 |          0 |  0 |

| 0 | ^n... |  0 |  c... | 0     | 0 |    0 |    0 | s...  |
| 0 | ^c... |  0 |  n... | 0     | 0 |    0 |    0 | s...  |
| 0 | c...  |  0 | n^... | 0     | 0 |    0 |    0 | s...  |
| 0 | c...  | 0^ |     0 | n...  | 0 |    0 |    0 | s...  |
| 0 | c...  |  0 |     0 | n...  | 0 |    0 |    0 | ^s... |
| 0 | c...  |  0 |     0 | n...  | 0 |    0 | s... | 0     |
| 0 | c...  |  0 |     0 | n^... | 0 |    0 | s... | 0     |
| 0 | c...  |  0 |     0 | eq^   | 0 | n... |    0 | s...  |
| 0 | c...  |  0 |     0 | eq^   | 0 | n... |    0 | s...  |

* If equal
| 0 | c... | 0 | 0 | e^ | 0 | n... | 0 | s...    | 0 | 0 |
| 0 | c... | 0 | 0 | 1^ | 0 | n... | 0 | s...    | 0 | 0 |
| 0 | c... | 0 | 0 | 0^ | 0 | n... | 0 | s(0)... | 0 | 0 |

* If not equal

| 0 | c...  |   0 | 0    | 0^ | 0 | n... |  0 | s...  | 0 | 0 |
| 0 | c...  |   0 | n... |  0 | 0 |    0 | 0^ | s...  | 0 | 0 |
| 0 | ^c... |   0 | n... |  0 | 0 |    0 |  0 | s...  | 0 | 0 |
| 0 | ^c... |   0 | n... |  0 | 0 |    0 |  0 | s...  | 0 | 0 |
| 0 | ^n... |   0 | c... |  0 | 0 |    0 |  0 | s...  | 0 | 0 |
| 0 | n...  | 255 | c... |  0 | 0 |    0 |  0 | s^... | 0 | 0 |

* File shuffling loop
| 0 | 0 | 0 | 0 | f2... |  0 | f1...  |      0 | 0 | 0 |  0 | ^s... | 0    | 0 |
| 0 | 0 | 0 | 0 | f2... |  0 | f1...  |      0 | 0 | 0 | 0^ |     0 | s... | 0 |
| 0 | 0 | 0 | 0 | f2... |  0 | f1...  |      0 | 0 | 0 |  0 |     0 | s... | 0 |
| 0 | 0 | 0 | 0 | f2... |  0 | f1^... |      0 | 0 | 0 |  0 |     0 | s... | 0 |
| 0 | 0 | 0 | 0 | f2... | 0^ | 0      |  f1... | 0 | 0 |  0 |     0 | s... | 0 |
| 0 | 0 | 0 | 0 | f2... |  0 | 0      | f1^... | 0 | 0 |  0 |     0 | s... | 0 |

* Actual file movement loop
| 0 | 0      |  0 |     0 | f2... | 0      |     0 | ^f1... |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f11    |  0 |     0 | f2... | 0      |     0 |     ^0 |  f12... | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f11    | ^0 |     0 |     0 | f2...  |     0 |      0 |  f12... | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f11    |  0 |     0 |     0 | f2...  |     0 |      0 | ^f12... | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f1...  |  0 |     0 |     0 | f2...  |     0 |      0 |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f1...  |  0 |     0 |     0 | f2...  |     0 |      0 |      ^0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f1...  |  0 |     0 |     0 | f2^... |     0 |      0 |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | f1^... |  0 |     0 |     0 | f2...  |     0 |      0 |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | 0      |  0 | f1... |     0 | f2^... |     0 |      0 |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | 0^     |  0 |     0 | f1... | 0      | f2... |      0 |       0 | 0 | 0 |  0 | s...  | 0 |   |   |   |
| 0 | 0      |  0 |     0 | f1... | 0      | f2... |      0 |       0 | 0 | 0 | ^0 | s...  | 0 |   |   |   |

* Wrap up

| 0 | 0 | 0 | 0 | f1... | 0 | f2...  | 0 | 0 | 0 | 0 | ^0    | s... |  0 |   |   |   |
| 0 | 0 | 0 | 0 | f1... | 0 | f2...  | 0 | 0 | 0 | 0 | s...  |    0 | ^0 |   |   |   |
| 0 | 0 | 0 | 0 | f1... | 0 | f2...  | 0 | 0 | 0 | 0 | ^s... |    0 |  0 |   |   |   |
| 0 | 0 | 0 | 0 | f1... | 0 | f2^... | 0 | 0 | 0 | 0 | s...  |    0 |  0 |   |   |   |
| 0 | 0 | 0 | 0 | f1... | 0 | f2^... | 0 | 0 | 0 | 0 | s...  |    0 |  0 |   |   |   |
